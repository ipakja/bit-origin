# BIT-Lab Konfigurationsdatei
# Kopiere diese Datei nach vars.env und passe die Werte an

# =============================================================================
# HOST-KONFIGURATION
# =============================================================================

# Hostname des Host-Systems
HOST_HOSTNAME="bitlab-host"

# Pfad für VM-Storage (QCOW2 Images)
VM_STORAGE_PATH="/var/lib/libvirt/images/bit-lab"

# Pfad für Cloud-Init Images
CLOUD_INIT_PATH="/var/lib/libvirt/cloud-init"

# Backup-Verzeichnis
BACKUP_PATH="./artifacts/backups"

# Retention für Backups (Tage)
BACKUP_RETENTION_DAYS=7

# Backup-Intervall (Stunden)
BACKUP_INTERVAL_HOURS=24

# =============================================================================
# NETZWERK-KONFIGURATION
# =============================================================================

# Netzwerk-Name (Libvirt)
NETWORK_NAME="bitlab"

# Netzwerk-Bridge-Name
NETWORK_BRIDGE="virbr1"

# Netzwerk-Subnetz
NETWORK_SUBNET="192.168.50.0/24"

# Gateway-IP (wird von bit-gateway verwendet, wenn aktiviert)
NETWORK_GATEWAY="192.168.50.1"

# DNS-Server (bit-core)
NETWORK_DNS="192.168.50.10"

# Domain-Name für lokale Resolution
NETWORK_DOMAIN="bitlab.local"

# =============================================================================
# VM-KONFIGURATION - bit-core (DNS/DHCP/Syslog)
# =============================================================================

BIT_CORE_ENABLED=true
BIT_CORE_NAME="bit-core"
BIT_CORE_HOSTNAME="bit-core"
BIT_CORE_IP="192.168.50.10"
BIT_CORE_CPU=2
BIT_CORE_RAM_GB=4
BIT_CORE_DISK_GB=20
BIT_CORE_SSH_KEY=""

# =============================================================================
# VM-KONFIGURATION - bit-flow (Automation/APIs)
# =============================================================================

BIT_FLOW_ENABLED=true
BIT_FLOW_NAME="bit-flow"
BIT_FLOW_HOSTNAME="bit-flow"
BIT_FLOW_IP="192.168.50.20"
BIT_FLOW_CPU=2
BIT_FLOW_RAM_GB=4
BIT_FLOW_DISK_GB=30
BIT_FLOW_SSH_KEY=""

# =============================================================================
# VM-KONFIGURATION - bit-vault (Storage/Backups)
# =============================================================================

BIT_VAULT_ENABLED=true
BIT_VAULT_NAME="bit-vault"
BIT_VAULT_HOSTNAME="bit-vault"
BIT_VAULT_IP="192.168.50.30"
BIT_VAULT_CPU=2
BIT_VAULT_RAM_GB=4
BIT_VAULT_DISK_GB=50
BIT_VAULT_SSH_KEY=""

# =============================================================================
# VM-KONFIGURATION - bit-gateway (Optional: NAT/Firewall)
# =============================================================================

BIT_GATEWAY_ENABLED=false
BIT_GATEWAY_NAME="bit-gateway"
BIT_GATEWAY_HOSTNAME="bit-gateway"
BIT_GATEWAY_IP="192.168.50.1"
BIT_GATEWAY_CPU=1
BIT_GATEWAY_RAM_GB=2
BIT_GATEWAY_DISK_GB=10
BIT_GATEWAY_SSH_KEY=""

# =============================================================================
# CLOUD-INIT KONFIGURATION
# =============================================================================

# Debian Cloud-Image URL (Bookworm)
CLOUD_IMAGE_URL="https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2"
CLOUD_IMAGE_NAME="debian-12-genericcloud-amd64.qcow2"

# Default-Admin-User
CLOUD_INIT_USER="admin"
CLOUD_INIT_SSH_KEY_FILE="${HOME}/.ssh/id_rsa.pub"

# Cloud-Init-Passwort (wird gehasht, nicht im Klartext gespeichert)
# Wird automatisch generiert, wenn leer
CLOUD_INIT_PASSWORD_HASH=""

# Timezone
CLOUD_INIT_TIMEZONE="Europe/Zurich"

# Locale
CLOUD_INIT_LOCALE="de_CH.UTF-8"

# =============================================================================
# FEATURE-TOGGLES
# =============================================================================

# Gateway-VM aktivieren (NAT/Firewall)
ENABLE_GATEWAY=false

# Netdata auf VMs installieren
ENABLE_NETDATA=true

# Kleine Ressourcen-Footprints (für schwächere Hardware)
SMALL_FOOTPRINT=false

# Automatische Updates aktivieren
AUTO_UPDATES=true

# Cockpit auf Host aktivieren
ENABLE_COCKPIT=true

# Zabbix-Agent installieren (Alternative zu Netdata)
ENABLE_ZABBIX=false
ZABBIX_SERVER=""

# =============================================================================
# SICHERHEIT
# =============================================================================

# Fail2ban auf VMs aktivieren
ENABLE_FAIL2BAN=true

# SSH-Härtung aktivieren
ENABLE_SSH_HARDENING=true

# Firewall auf Host aktivieren (UFW)
ENABLE_HOST_FIREWALL=true

# Firewall-Regeln für Host (Komma-getrennt)
HOST_FIREWALL_ALLOW="22/tcp,9090/tcp"

# =============================================================================
# MONITORING & TELEMETRIE
# =============================================================================

# Telemetrie-Status-Seite generieren
ENABLE_TELEMETRY=true

# Telemetrie-Update-Intervall (Sekunden)
TELEMETRY_UPDATE_INTERVAL=60

# Status-HTML-Datei
STATUS_HTML_PATH="./artifacts/status.html"

# =============================================================================
# ANSIBLE (Optional)
# =============================================================================

ENABLE_ANSIBLE=false
ANSIBLE_INVENTORY="./ansible/inventory.ini"

# =============================================================================
# TERRAFORM (Optional)
# =============================================================================

ENABLE_TERRAFORM=false
TERRAFORM_DIR="./terraform"

# =============================================================================
# SKRIPT-OPTIONEN
# =============================================================================

# Dry-Run-Modus (keine Änderungen, nur Simulation)
DRY_RUN=false

# Log-Level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL="INFO"

# Log-Datei
LOG_FILE="./artifacts/deploy.log"

# Bestätigung für destruktive Aktionen erfordern
REQUIRE_CONFIRM=true

# =============================================================================
# VALIDIERUNG
# =============================================================================

# Timeout für VM-Boot-Validierung (Sekunden)
VM_BOOT_TIMEOUT=300

# Timeout für SSH-Verbindungen (Sekunden)
SSH_TIMEOUT=10

# Anzahl Ping-Versuche für Reachability-Check
PING_COUNT=3

# =============================================================================
# ADVANCED (Nur bei Bedarf ändern)
# =============================================================================

# QEMU-Machine-Typ
QEMU_MACHINE_TYPE="q35"

# CPU-Modell (Passthrough = Host-CPU, qemu64 = Generic)
QEMU_CPU_MODEL="host-passthrough"

# Disk-Bus-Typ
QEMU_DISK_BUS="virtio"

# Netzwerk-Modell
QEMU_NETWORK_MODEL="virtio"

# Video-Modell
QEMU_VIDEO_MODEL="virtio"

# Cloud-Init-Drive-Format
CLOUD_INIT_FORMAT="iso"







